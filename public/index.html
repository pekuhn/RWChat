<html>
<header><title>Little Web Chat</title></header>
<body>
	<script src="/socket.io/socket.io.js"></script>
	<script>
  		var server = "http://localhost:3000";
    		var io = io(server);
	</script>
	<form onsubmit="return sendMessage();">
		<input id="message" placeholder="Enter message">
		<input type="submit" value="Send">
	</form>
	<script>


		function sendMessage() {
			//get the message input defined above
			var message = document.getElementById("message");
			//generate event
			io.emit("new_message", message.value);
			return false;
		}

		// client will listen to events from server
		io.on("new_message", function (data) {
			console.log("Server says", data);
		});
	</script>
	<!--list where all messages will be displayed-->
	<ul id="messages"></ul>
	<script>
		// client will listen from server
		io.on("new_message", function (data) {
    		// display message
    		console.log("Server says", data);
    		// creates a new DOM element for li tag
    		var li = document.createElement("li");
    		// show message in li item
    		//li.innerHTML = data;
		li.innerHTML = data.message;
    		// append the message at the end of list
    		var messages = document.getElementById("messages");
    		messages.appendChild(li);
		});
	</script>
</body>
</html>
